/**
 * This file is part of ILIAS, a powerful learning management system
 * published by ILIAS open source e-Learning e.V.
 *
 * ILIAS is licensed with the GPL-3.0,
 * see https://www.gnu.org/licenses/gpl-3.0.en.html
 * You should have received a copy of said license along with the
 * source code, too.
 *
 * If this is not the case or you just want to try ILIAS, you'll find
 * us at:
 * https://www.ilias.de
 * https://github.com/ILIAS-eLearning
 */
!function(e,t,s){"use strict";class i{#e=new Set;#t;#s;#i;#l;constructor(e,t,s,i,l,n){this.#t=s,this.#s=i,this.#i=l,this.#l=n,e.on(t,this.#l,(()=>{this.#n()})),this.#i.maybeAddFilterHandler((e=>{this.#r(e)})),this.parseLevels(),this.engageLevel(this.#t.read())}parseLevels(){this.#i.parseLevel(((e,t,s,i,l)=>this.#s.addLevel(e,t,s,i,l)),((e,t)=>this.#s.buildLeaf(e,t)),(e=>{this.engageLevel(e)}))}removeEngageListener(e){this.#e.has(e)&&this.#e.delete(e)}addEngageListener(e){this.#e.has(e)||this.#e.add(e)}getBackSignal(){return this.#l}engageLevel(e){this.#s.engageLevel(e),this.#a(),this.#e.forEach((t=>{t(e)}))}#r(e){this.#s.engageLevel(0),this.#s.filter(e),this.#i.setFiltered(this.#s.getFiltered()),e.target.focus()}#n(){this.#s.upLevel(),this.engageLevel(this.#s.getCurrent().id)}#a(){const e=this.#s.getCurrent(),t=this.#s.getParent();let s=2;null===e.parent?s=0:"0"===e.parent&&(s=1),this.#i.setEngaged(e.id),this.#t.store(e.id),this.#i.setHeader(e.headerDisplayElement,t.headerDisplayElement),this.#i.setHeaderBacknav(s),this.#i.correctRightColumnPositionAndHeight(e.id)}}class l{#d="level_id";#h;constructor(e){this.#h=e}#c(){return this.#h}read(){return this.#h.items[this.#d]??0}store(e){this.#h.add(this.#d,e),this.#h.store()}}class n{#o={id:null,parent:null,engaged:!1,headerDisplayElement:"",leaves:[]};#E={index:null,text:null,filtered:!1};#u=[];#g(e,t,s,i){const l={...this.#o};return l.id=e,l.parent=s,l.headerDisplayElement=t,l.leaves=i,l}buildLeaf(e,t){const s={...this.#E};return s.index=e,s.text=t,s}addLevel(e,t,s,i=null){let l=i;if(null===l){l=this.#u.length.toString();const i=this.#g(l,e,t,s);this.#u[i.id]=i}else this.#u[l].leaves=s;return this.#u[l]}engageLevel(e){this.#u.forEach((t=>{t.engaged=t.id===e}))}getLevel(e){const t=this.#u.find((t=>t.id===e));return t||null}getCurrent(){const e=this.#u.find((e=>e.engaged));return void 0!==e?e:this.#u[0]}getParent(){const e=this.getCurrent();return e.parent?this.getLevel(e.parent):{}}upLevel(){const e=this.getCurrent();e.parent&&this.engageLevel(this.getLevel(e.parent).id)}#m(e){null!==e&&0!==e||(this.#u[e].filtered=!1,null!==this.#u[e].parent&&0!==this.#u[e].parent&&this.#m(this.#u[e].parent))}filter(e){const t=e.target.value.toLowerCase();this.#u.forEach((e=>{e.leaves.forEach((e=>{const s=e;""!==t?!1!==s.text.toLowerCase().includes(t)?s.filtered=!1:s.filtered=!0:s.filtered=!1}))}))}getFiltered(){const e=[];return this.#u.forEach((t=>{const s=t.leaves.filter((e=>e.filtered));if(s.length>0){const i=this.#g(t.id,t.headerDisplayElement,t.parent,[...s]);e.push(i)}})),e}}function r(e,t){for(let s=0;s<e.length;s+=1)t(e[s],s)}class a{#L={DRILLDOWN:"c-drilldown",MENU:"c-drilldown__menu",MENU_FILTERED:"c-drilldown--filtered",HEADER_ELEMENT:"c-drilldown__menulevel--trigger",MENU_BRANCH:"c-drilldown__branch",MENU_LEAF:"c-drilldown__leaf",FILTER:"c-drilldown__filter",ACTIVE:"c-drilldown__menulevel--engaged",ACTIVE_ITEM:"c-drilldown__menuitem--engaged",ACTIVE_PARENT:"c-drilldown__menulevel--engagedparent",FILTERED:"c-drilldown__menuitem--filtered",WITH_BACKLINK_ONE_COL:"c-drilldown__header--showbacknav",WITH_BACKLINK_TWO_COL:"c-drilldown__header--showbacknavtwocol",HEADER_TAG:"header",LIST_TAG:"ul",LIST_ELEMENT_TAG:"li",ID_ATTRIBUTE:"data-ddindex"};#v={dd:null,header:null,levels:[]};#p;#T;constructor(e,t,s){this.#p=e,this.#T=t,this.#v.dd=e.getElementById(s),[this.#v.header]=this.#v.dd.getElementsByTagName(this.#L.HEADER_TAG)}#_(){return this.#v.dd.querySelector(`.${this.#L.MENU}`)}maybeAddFilterHandler(e){this.#v.header.querySelector(`.${this.#L.FILTER} > input`)?.addEventListener("keyup",e)}parseLevel(e,t,s){r(this.#_().querySelectorAll(this.#L.LIST_TAG),(i=>{const l=i.getAttribute(this.#L.ID_ATTRIBUTE),n=e(this.#f(i),this.#I(i),this.#A(i,t),l);null===l&&(this.#y(i,n.id),this.registerHandler(i,s,n.id),this.#v.levels[n.id]=i)}))}#y(e,t){e.setAttribute(this.#L.ID_ATTRIBUTE,t)}#f(e){const t=e.parentElement.querySelector(`:scope > .${this.#L.HEADER_ELEMENT}`);if(null===t)return null;let s=null;return s=this.#p.createElement("h2"),s.textContent=t.innerText,s}#I(e){return e.parentElement.parentElement.getAttribute(this.#L.ID_ATTRIBUTE)}#A(e,t){const s=e.querySelectorAll(`:scope >.${this.#L.MENU_LEAF}`),i=[];return r(s,((e,s)=>{i.push(t(s,e.firstElementChild.innerText))})),i}registerHandler(e,t,s){const i=e.parentElement.querySelector(`:scope > .${this.#L.HEADER_ELEMENT}`);null!==i&&i.addEventListener("click",(()=>{t(s)}))}setEngaged(e){this.#v.dd.querySelector(`.${this.#L.ACTIVE}`)?.classList.remove(`${this.#L.ACTIVE}`),this.#v.dd.querySelector(`.${this.#L.ACTIVE_ITEM}`)?.classList.remove(`${this.#L.ACTIVE_ITEM}`),this.#v.dd.querySelector(`.${this.#L.ACTIVE_PARENT}`)?.classList.remove(`${this.#L.ACTIVE_PARENT}`);const t=this.#v.levels[e];t.classList.add(this.#L.ACTIVE);const s=t.parentElement.parentElement;"UL"===s.nodeName?(t.parentElement.classList.add(this.#L.ACTIVE_ITEM),s.classList.add(this.#L.ACTIVE_PARENT)):t.classList.add(this.#L.ACTIVE_PARENT);const i=this.#v.levels[e].querySelector(":scope > li")?.firstElementChild;i?.focus()}setFiltered(e){const t=this.#v.dd.querySelectorAll(`${this.#L.LIST_TAG}`),s=this.#v.dd.querySelectorAll(`.${this.#L.MENU_LEAF}`),i=e.map((e=>e.id)),l=this.#v.dd.querySelectorAll(`.${this.#L.MENU} > ul > .${this.#L.MENU_BRANCH}`);if(this.#v.levels.forEach((e=>{const t=e;t.style.removeProperty("top"),t.style.removeProperty("height")})),s.forEach((e=>{e.classList.remove(this.#L.FILTERED)})),0===e.length)return this.#v.dd.classList.remove(this.#L.MENU_FILTERED),l.forEach((e=>{const t=e;t.firstElementChild.disabled=!1,t.classList.remove(this.#L.FILTERED)})),void this.correctRightColumnPositionAndHeight("0");this.setEngaged(0),this.#v.dd.classList.add(this.#L.MENU_FILTERED),l.forEach((e=>{const t=e;t.firstElementChild.disabled=!0,t.classList.remove(this.#L.FILTERED)})),i.forEach(((s,i)=>{const[l]=[...t].filter((e=>e.getAttribute(this.#L.ID_ATTRIBUTE)===s)),n=l.querySelectorAll(`:scope >.${this.#L.MENU_LEAF}`);e[i].leaves.forEach((e=>n[e.index].classList.add(this.#L.FILTERED)))})),l.forEach((e=>{if(0===e.querySelectorAll(`.${this.#L.MENU_LEAF}:not(.${this.#L.FILTERED})`).length){e.classList.add(this.#L.FILTERED)}}))}setHeader(e,t){this.#v.header.children[1].replaceWith(this.#p.createElement("div")),null!==e?(this.#v.header.firstElementChild.replaceWith(e),null!==t&&this.#v.header.children[1].replaceWith(t)):this.#v.header.firstElementChild.replaceWith(this.#p.createElement("div"))}setHeaderBacknav(e){this.#v.header.classList.remove(this.#L.WITH_BACKLINK_TWO_COL),this.#v.header.classList.remove(this.#L.WITH_BACKLINK_ONE_COL),0!==e&&(e>1&&this.#v.header.classList.add(this.#L.WITH_BACKLINK_TWO_COL),this.#v.header.classList.add(this.#L.WITH_BACKLINK_ONE_COL))}correctRightColumnPositionAndHeight(e){let t=this.#v.levels[e];const s=this.#v.dd.querySelector(`.${this.#L.MENU}`),i=this.#v.dd.querySelector(`.${this.#L.MENU}`).offsetHeight;if(0!==i)this.#v.levels.forEach((e=>{const t=e;t.style.removeProperty("top"),t.style.removeProperty("height")})),"0"===e&&(t=t.querySelector(`:scope > .${this.#L.MENU_BRANCH} > ul`)),0!==t.offsetHeight&&(t.style.top=`-${t.offsetTop}px`,t.style.height=`${i}px`);else{const t=new this.#T((i=>{i[0].target.offsetHeight>0&&(this.correctRightColumnPositionAndHeight(e),t.unobserve(s))}));t.observe(s)}}}s.UI=s.UI||{},s.UI.menu=s.UI.menu||{},s.UI.menu.drilldown=new class{#C=[];#p;#T;#N;#R;constructor(e,t,s,i){this.#N=e,this.#T=t,this.#p=s,this.#R=i}init(e,t,s){if(void 0!==this.#C[e])throw new Error(`Drilldown with id '${e}' has already been initialized.`);null!==this.#p.getElementById(e)&&(this.#C[e]=new i(this.#N,this.#p,new l(new this.#R.Utilities.CookieStorage(s)),new n,new a(this.#p,this.#T,e),t))}getInstance(e){return void 0!==this.#C[e]?this.#C[e]:null}}(new class{#S;constructor(e){this.#S=e}on(e,t,s){this.#S(e).on(t,s)}off(e,t,s){this.#S(e).off(t,s)}}(t),e.defaultView.ResizeObserver,e,s)}(document,$,il);
