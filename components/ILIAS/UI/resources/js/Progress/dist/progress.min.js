/**
 * This file is part of ILIAS, a powerful learning management system
 * published by ILIAS open source e-Learning e.V.
 *
 * ILIAS is licensed with the GPL-3.0,
 * see https://www.gnu.org/licenses/gpl-3.0.en.html
 * You should have received a copy of said license along with the
 * source code, too.
 *
 * If this is not the case or you just want to try ILIAS, you'll find
 * us at:
 * https://www.ilias.de
 * https://github.com/ILIAS-eLearning
 */
!function(e,t){"use strict";class s{#e;#t;constructor(e,t){this.#e=e,this.#t=t}indeterminate(e=null){this.#e.hasAttribute("value")&&this.#e.removeAttribute("value"),null!==e&&this.#s(e)}determinate(e,t=null){if(!Number.isInteger(e)||e<0||e>=this.#e.max)throw new Error(`Progress value must be a whole number between 0 and ${this.#e.max}.`);this.#e.value=e,null!==t&&this.#s(t)}success(e){this.#e.value!==this.#e.max&&this.#r(e,"success")}failure(e){this.#e.value!==this.#e.max&&this.#r(e,"failure")}reset(){this.#e.labels.forEach((e=>{e.querySelectorAll("span[data-status]").forEach((e=>{e.classList.remove("visible"),e.classList.add("hidden")}))})),this.#e.classList.remove("c-progress-bar--success"),this.#e.classList.remove("c-progress-bar--failure"),this.#e.value=0,this.#n()}#r(e,t){this.#e.labels.forEach((e=>{e.parentElement.querySelectorAll("span[data-status]").forEach((e=>{e.getAttribute("data-status")===t?(e.classList.remove("hidden"),e.classList.add("visible")):(e.classList.remove("visible"),e.classList.add("hidden"))}))})),this.#e.value=this.#e.max,this.#e.classList.add(`c-progress-bar--${t}`),this.#s(e)}#s(e){this.#t.classList.remove("invisible"),this.#t.classList.add("visible"),this.#t.textContent=e}#n(){this.#t.classList.remove("visible"),this.#t.classList.add("invisible"),this.#t.textContent=""}}function r(e,t){if(!(t instanceof e.defaultView.HTMLProgressElement))throw new Error("Progress bar must have a <progress> element.");const r=t.parentElement.querySelector(".c-progress-bar__message");if(null===r)throw new Error("Could not find progress bar message element.");return new s(t,r)}class n{#i;#a;#l;#o;#c=null;#h=!1;constructor(e,t,s,r){this.#i=e,this.#a=t,this.#l=s,this.#o=r}#u(e){const t=function(e){const t=e.querySelector('section[data-section="status"]');return null!==t&&t.hasAttribute("data-status")?t.getAttribute("data-status"):null}(e),s=function(e){const t=e.querySelector('section[data-section="progress"] > progress');return t instanceof e.ownerDocument.defaultView.HTMLProgressElement?parseInt(t.value,10):null}(e),r=function(e){const t=e.querySelector('section[data-section="message"]');return null!==t&&t.innerText?t.innerText:null}(e);"determinate"===t?this.determinate(s??-1,r):"indeterminate"===t?this.indeterminate(r):"success"===t?this.success(r):this.failure(r)}#m(){null===this.#c&&(this.#c=setInterval((()=>this.#g()),this.#l))}#d(){null!==this.#c&&(clearInterval(this.#c),this.#c=null)}async#g(){if(!this.#h)try{this.#h=!0;const e=await this.#i.loadContent(this.#o);this.#u(e)}catch(e){this.failure(e.message)}finally{this.#h=!1}}indeterminate(e=null){this.#a.indeterminate(e),this.#m()}determinate(e,t=null){this.#a.determinate(e,t)}success(e){this.#a.success(e),this.#d()}failure(e){this.#a.failure(e),this.#d()}reset(){this.#a.reset(),this.#d()}}const i=new class{#p;constructor(e){this.#p=e}loadContent(e){return fetch(e.toString()).then((e=>e.text())).then((e=>this.#f(e))).then((e=>this.#E(e))).catch((t=>{throw new Error(`Could not render element(s) from '${e}': ${t.message}`)}))}#b(e){const t=this.#p.createElement("script");return e.hasAttribute("type")&&t.setAttribute("type",e.getAttribute("type")),e.hasAttribute("src")&&t.setAttribute("src",e.getAttribute("src")),e.textContent.length>0&&(t.textContent=e.textContent),t}#f(e){const t=this.#p.createElement("div");return t.innerHTML=e.trim(),t.querySelectorAll("script").forEach((e=>{const t=this.#b(e);e.replaceWith(t)})),t.children}#E(e){const t=this.#p.createDocumentFragment();return t.append(...e),t}}(t),a=new class{#v=new Map;register(e,t){this.#v.has(t)||this.#v.set(t,e)}indeterminate(e,t=null){this.#w(e).indeterminate(t)}determinate(e,t,s=null){this.#w(e).determinate(t,s)}success(e,t){this.#w(e).success(t)}failure(e,t){this.#w(e).failure(t)}#w(e){if(!this.#v.has(e))throw new Error(`Could not find progress bar component for signal '${e}'`);return this.#v.get(e)}};e.UI=e.UI||{},e.UI.Progress={},e.UI.Progress.Bar={indeterminate:(e,t)=>a.indeterminate(e,t),success:(e,t)=>a.success(e,t),failure:(e,t)=>a.failure(e,t),determinate:(e,t,s)=>a.determinate(e,t,s),createAsync:(e,s,l)=>{const o=function(e,t,s,r){if(!s.hasAttribute("data-url"))throw new Error('Async progress bar must provide a "data-url" attribute.');return new n(e,t,r,s.getAttribute("data-url"))}(i,r(t,e),e,l);return a.register(o,s),o},create:(e,s)=>{const n=r(t,e);return a.register(n,s),n}}}(il,document);
